"use strict";var View=function(){this.randomizeBackground(),this.currentDir=window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/"))};View.prototype.container="main-container",View.prototype.backgrounds=["bg0.jpg","bg1.jpg","bg2.jpg","bg3.jpg","bg4.jpg","bg5.jpg"],View.prototype.showContent=function(e,t){$("#"+t).html(e)},View.prototype.randomizeBackground=function(){var e=this.backgrounds[Math.floor(Math.random()*this.backgrounds.length)];document.body.style.background="url("+this.currentDir+"/images/"+e+") no-repeat center center fixed"};var Model=function e(){this.content=new e.content};Model.content=function(){this.folder="templates",this.pages={home:"home.html",career:"career.html",projects:"projects.html",media:"media.html",about:"about.html",cookies:"cookies.html"},this.languages={es_ES:"es_ES",en_GB:"en_GB"}},Model.prototype.getPageURI=function(e){var t=this.getUserLanguage();return t||(t="es_ES"),this.content.folder+"/"+t+"/"+this.content.pages[e]},Model.prototype.setPage=function(e){var t=this.retrievePage(e);$.when(t).done(function(e){HaritzMedina.view.showContent(e,HaritzMedina.view.container)})},Model.prototype.setUserLanguage=function(e){this.cookies.createCookie("lang",e)},Model.prototype.getUserLanguage=function(){return this.cookies.readCookie("lang")},Model.prototype.retrievePage=function(e){return $.get(e)},Model.prototype.cookies={},Model.prototype.cookies.createCookie=function(e,t,o){var n="";if(o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3),n="; expires="+i.toGMTString()}document.cookie=e+"="+t+n+"; path=/"},Model.prototype.cookies.readCookie=function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null},Model.prototype.cookies.eraseCookie=function(e){this.createCookie(e,"",-1)};var Controller=function(){};Controller.prototype.initialize=function(){$(".nav a").bind("click",function(){$(".nav").find(".active").removeClass("active"),$(this).parent().addClass("active")}),$("a.barItem").bind("click",function(e){HaritzMedina.model.content.pages[e.toElement.id]&&HaritzMedina.model.setPage(HaritzMedina.model.getPageURI(e.toElement.id))}),$("a.langItem").bind("click",function(e){HaritzMedina.model.content.languages[e.toElement.id]&&(HaritzMedina.model.setUserLanguage(e.toElement.id),window.location.reload())}),$(".cc_more_info").bind("click",function(){HaritzMedina.model.setPage(HaritzMedina.model.getPageURI("cookies"))});var e=window.location.hash.substr(1);$.isEmptyObject(e)&&(e="home"),HaritzMedina.model.setPage(HaritzMedina.model.getPageURI(e)),HaritzMedina.view.randomizeBackground()};var HaritzMedina={};HaritzMedina.controller=new Controller,HaritzMedina.model=new Model,HaritzMedina.view=new View,HaritzMedina.controller.initialize();